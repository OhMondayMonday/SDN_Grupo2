{% extends "base.html" %}
{% block title %}Conectado - Portal Cautivo SDN{% endblock %}
{% block content %}
    <div class="user-info">
        <h3>ğŸ‰ Â¡ConexiÃ³n Exitosa!</h3>
        <p>Bienvenido <strong>{{ username }}</strong></p>
    </div>
    
    <div class="network-status">
        ğŸŸ¢ Red configurada y acceso autorizado
    </div>
    
    <div class="info-box">
        <h4>ğŸ“Š Detalles de tu SesiÃ³n:</h4>
        <p><strong>ğŸ‘¤ Usuario:</strong> {{ username }}</p>
        <p><strong>ğŸ·ï¸ Rol asignado:</strong> {{ role }}</p>
        <p><strong>ğŸŒ VLAN de red:</strong> {{ vlan_id }}</p>
        <p><strong>ğŸ“ Tu IP:</strong> {{ client_ip }}</p>
        <p><strong>ğŸ–¥ï¸ DirecciÃ³n MAC:</strong> {{ mac_address }}</p>
        <p><strong>â±ï¸ DuraciÃ³n de sesiÃ³n:</strong> {{ session_timeout }} segundos</p>
    </div>
    
    <div class="info-box">
        <h4>âœ… Estado de Red SDN:</h4>
        <div class="network-status">ğŸ”— Conectado al controlador SDN</div>
        <div class="network-status">âš¡ Flujos de red instalados</div>
        <div class="network-status">ğŸ›¡ï¸ PolÃ­ticas de seguridad aplicadas</div>
        <div class="network-status">ğŸŒ Acceso a Internet habilitado</div>
    </div>
    
    <div class="info-box">
        <h4>ğŸš¦ Permisos de Acceso SegÃºn tu Rol:</h4>
        
        {% if role == 'ROLE_ADMIN' %}
            <div class="network-status">ğŸ”“ Acceso completo a todas las redes</div>
            <div class="network-status">âš™ï¸ Herramientas de administraciÃ³n</div>
            <div class="network-status">ğŸ”§ SSH y protocolos de gestiÃ³n</div>
        {% elif role == 'ROLE_PROFESOR' %}
            <div class="network-status">ğŸŒ Acceso web completo (HTTP/HTTPS)</div>
            <div class="network-status">ğŸ”— SSH para servidores autorizados</div>
            <div class="network-status">ğŸ¢ Acceso a redes internas</div>
        {% elif role == 'ROLE_ESTUDIANTE' %}
            <div class="network-status">ğŸŒ Acceso web (HTTP/HTTPS)</div>
            <div class="network-status">ğŸ” DNS para resoluciÃ³n de nombres</div>
            <div style="color: #dc3545;">âŒ Sin acceso a redes internas</div>
        {% elif role == 'ROLE_GUEST' %}
            <div class="network-status">ğŸŒ Acceso web bÃ¡sico</div>
            <div style="color: #dc3545;">âŒ Sin acceso a redes privadas</div>
            <div style="color: #dc3545;">âŒ Protocolos limitados</div>
        {% elif role == 'ROLE_IOT' %}
            <div class="network-status">ğŸ  ComunicaciÃ³n con servidor IoT</div>
            <div style="color: #dc3545;">âŒ Sin acceso a Internet</div>
            <div style="color: #dc3545;">âŒ TrÃ¡fico altamente restringido</div>
        {% elif role == 'ROLE_SOPORTE' %}
            <div class="network-status">ğŸ”“ Acceso tÃ©cnico completo</div>
            <div class="network-status">ğŸ› ï¸ Herramientas de diagnÃ³stico</div>
            <div class="network-status">ğŸ“¡ ICMP y protocolos de red</div>
        {% endif %}
    </div>
    
    <div class="session-timer">
        â° Tu sesiÃ³n se cerrarÃ¡ automÃ¡ticamente despuÃ©s de {{ session_timeout }} segundos de inactividad
    </div>
    
    <p style="margin: 20px 0; color: #28a745; font-weight: 500;">
        ğŸŒ Ahora puedes navegar libremente segÃºn tus permisos de rol.<br>
        Esta ventana se puede cerrar de forma segura.
    </p>
    
    <a href="/logout" class="btn logout-btn">ğŸ” Cerrar SesiÃ³n</a>
    
    <div class="info-box" style="margin-top: 20px; background: #e7f3ff;">
        <h4>ğŸ’¡ InformaciÃ³n TÃ©cnica:</h4>
        <p><strong>TecnologÃ­a:</strong> SDN (Software Defined Networking)</p>
        <p><strong>AutenticaciÃ³n:</strong> RADIUS con base de datos MySQL</p>
        <p><strong>Controlador:</strong> Floodlight con polÃ­ticas dinÃ¡micas</p>
        <p><strong>Seguridad:</strong> Flujos SDN basados en roles</p>
    </div>
{% endblock %}
